@inherits UmbracoViewPage<FacetedSearchModel>

@using SpacialFacetedExamineSearch.Site.Models
@using SpacialFacetedExamineSearch.Site.Controllers

<form action="/search/" method="GET">
    <input type="text" name="searchTerm" placeholder="Search term..." value="@Model.SearchQuery.Phrase" />
    <input type="text" name="lat" placeholder="52.95482" value="@Model.Latitude" />
    <input type="text" name="long" placeholder="-1.15564" value="@Model.Longitude" />
    <button type="submit">Search</button>
</form>

@if (Model?.PageResults?.Any() ?? false)
{
    <div class="container">
        @foreach (var item in Model.PageResults)
        {
            var name = @item.Doc.GetValues("name").FirstOrDefault();
            var imageUrl = @item.Doc.GetValues("imageUrl").FirstOrDefault();
            var url = @item.Doc.GetValues("url").FirstOrDefault();

            <div>
                <img src="@imageUrl" alt="@name" >
                <h2><a target="_blank" href="@url">@name</a></h2>
                <p>Distance: @item.Distance.ToString("n1") miles</p>
            </div>
        }
    </div>
}